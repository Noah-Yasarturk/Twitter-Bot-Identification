#Import the necessary methods from tweepy library
from tweepy.streaming import StreamListener
from tweepy import OAuthHandler
from tweepy import Stream
import json
import pandas as pd
import re
import matplotlib.pyplot as plt
import plotly
import plotly.plotly as py
import plotly.graph_objs as go
import time
import numpy as np

#Variables that contains the user credentials to access Twitter API 
access_token = ""
access_token_secret = ""
consumer_key = ""
consumer_secret = ""

max_tweets = 20

plotly.tools.set_credentials_file(username='', api_key='')

#This is a basic listener that just prints received tweets to stdout.
class StdOutListener(StreamListener):

    def __init__(self, api=None, time_limit=40):
        self.start_time = time.time()
        self.limit = time_limit
        super(StdOutListener, self).__init__()
        
    
    def on_status(self, status):
            self.num_tweets +=1
            if self.num_tweets < 20:
                    return True
            else:
                    return False


    def on_data(self, data):
        
        global alT
        global alH
        global akT
        global akH
        global azT
        global azH
        global arT
        global arH
        global caT
        global caH
        global coT
        global coH
        global ctT
        global ctH
        global dcT
        global dcH
        global deT
        global deH
        global flT
        global flH
        global gaT
        global gaH
        global hiT
        global hiH
        global idT
        global idH
        global ilT
        global ilH
        global inT
        global inH
        global iaT
        global iaH
        global ksT
        global ksH
        global kyT
        global kyH
        global laT
        global laH
        global meT
        global meH
        global mdT
        global mdH
        global maT
        global maH
        global miT
        global miH
        global mnT
        global mnH
        global msT
        global msH
        global moT
        global moH
        global mtT
        global mtH
        global neT
        global neH
        global nvT
        global nvH
        global nhT
        global nhH
        global njT
        global njH
        global nmT
        global nmH
        global nyT
        global nyH
        global ncT
        global ncH
        global ndT
        global ndH
        global ohT
        global ohH
        global okT
        global okH
        global orT
        global orH
        global paT
        global paH
        global riT
        global riH
        global scT
        global scH
        global sdT
        global sdH
        global tnT
        global tnH
        global txT
        global txH
        global utT
        global utH
        global vtT
        global vtH
        global vaT
        global vaH
        global waT
        global waH
        global wvT
        global wvH
        global wiT
        global wiH
        global wyT
        global wyH
        alH = 0
        alT = 0
        akH = 0
        akT = 0
        azH = 0
        azT = 0
        arH = 0
        arT = 0
        caH = 0
        caT = 0
        coH = 0
        coT = 0
        ctH = 0
        ctT = 0
        dcH = 0
        dcT = 0
        deH = 0
        deT = 0
        flH = 0
        flT = 0
        gaH = 0
        gaT = 0
        hiH = 0
        hiT = 0
        idH = 0
        idT = 0
        ilH = 0
        ilT = 0
        inH = 0
        inT = 0
        iaH = 0
        iaT = 0
        ksH = 0
        ksT = 0
        kyH = 0
        kyT = 0
        laH = 0
        laT = 0
        meH = 0
        meT = 0
        mdH = 0
        mdT = 0
        maH = 0
        maT = 0
        miH = 0
        miT = 0
        mnH = 0
        mnT = 0
        msH = 0
        msT = 0
        moH = 0
        moT = 0
        mtH = 0
        mtT = 0
        neH = 0
        neT = 0
        nvH = 0
        nvT = 0
        nhH = 0
        nhT = 0
        njH = 0
        njT = 0
        nmH = 0
        nmT = 0
        nyH = 0
        nyT = 0
        ncH = 0
        ncT = 0
        ndH = 0
        ndT = 0
        ohH = 0
        ohT = 0
        okH = 0
        okT = 0
        orH = 0
        orT = 0
        paH = 0
        paT = 0
        riH = 0
        riT = 0
        scH = 0
        scT = 0
        sdH = 0
        sdT = 0
        tnH = 0
        tnT = 0
        txH = 0
        txT = 0
        utH = 0
        utT = 0
        vtH = 0
        vtT = 0
        vaH = 0
        vaT = 0
        waH = 0
        waT = 0
        wvH = 0
        wvT = 0
        wiH = 0
        wiT = 0
        wyH = 0
        wyT = 0


        while(time.time() - self.start_time) < self.limit:

                #save data
                savefile=open("C:\\Python27\\myPrograms\\jsontweets.txt","a")
                varfile=open("C:\\Python27\\myPrograms\\varfile.txt","w")
                
                #compile regexes for state searches
                al = re.compile(r'\bAL\"')
                ak = re.compile(r'\bAK\"')
                az = re.compile(r'\bAZ\"')
                ar = re.compile(r'\bAR\"')
                ca = re.compile(r'\bCA\"')
                co = re.compile(r'\bCO\"')
                ct = re.compile(r'\bCT\"')
                dc = re.compile(r'\bDC\"')
                de = re.compile(r'\bDE\"')
                fl = re.compile(r'\bFL\"')
                ga = re.compile(r'\bGA\"')
                hi = re.compile(r'\bHI\"')
                ida = re.compile(r'\bID\"')
                il = re.compile(r'\bIL\"')
                ind = re.compile(r'\bIN\"')
                ia = re.compile(r'\bIA\"')
                ks = re.compile(r'\bKS\"')
                ky = re.compile(r'\bKY\"')
                la = re.compile(r'\bLA\"')
                me = re.compile(r'\bME\"')
                md = re.compile(r'\bMD\"')
                ma = re.compile(r'\bMA\"')
                mi = re.compile(r'\bMI\"')
                mn = re.compile(r'\bMN\"')
                ms = re.compile(r'\bMS\"')
                mo = re.compile(r'\bMO\"')
                mt = re.compile(r'\bMT\"')
                ne = re.compile(r'\bNE\"')
                nv = re.compile(r'\bNV\"')
                nh = re.compile(r'\bNH\"')
                nj = re.compile(r'\bNJ\"')
                nm = re.compile(r'\bNM\"')
                ny = re.compile(r'\bNY\"')
                nc = re.compile(r'\bNC\"')
                nd = re.compile(r'\bND\"')
                oh = re.compile(r'\bOH\"')
                ok = re.compile(r'\bOK\"')
                ore = re.compile(r'\bOR\"')
                pa = re.compile(r'\bPA\"')
                ri = re.compile(r'\bRI\"')
                sc = re.compile(r'\bSC\"')
                sd = re.compile(r'\bSD\"')
                tn = re.compile(r'\bTN\"')
                tx = re.compile(r'\bTX\"')
                ut = re.compile(r'\bUT\"')
                vt = re.compile(r'\bVT\"')
                va = re.compile(r'\bVA\"')
                wa = re.compile(r'\bWA\"')
                wv = re.compile(r'\bWV\"')
                wi = re.compile(r'\bWI\"')
                wy = re.compile(r'\bWY\"')

                #dictionary of pro and anti candidate terms
                proH = ["pro-choice","notmypresident","not my president","feminism","woman",
                        "recount","Imwithher","Bernie Sanders","gun violence","NRA",
                        "electoral college","minority","female"]
                conH = ["disaster","liberal media","not Hillary","killary","emails","wikileaks",
                        "Benghazi","Clinton Foundation","Wall Street","bank","banks",
                        "corporate"]
                proT = ["pro-life","outsource","outsourcing","jobs back","nationalism",
                        "nationalist","infanticide","extremism","Islamic terrorism",
                        "trump pence","trumppence","coal","currency","rigged","tax cut",
                        "2nd Amendment","second amendment","tax cuts","establishment","wall",
                        "immigration","businessman","terrorism","illegal",
                        "makeamericagreatagain","voter fraud","fraud"]
                conT = ["fascist","fascism","blind trust","orange","stoptrump","nevertrump",
                        "stop trump","never trump","loose cannon","racist","hollywood access",
                        "tax returns","grab","bankrupt","bankruptcies","hate","racist",
                        "rhetoric","KKK","David Duke","temperament"]



                
                states = [al, ak, az, ar, ca, co, ct, de, fl, ga, hi, ida, il, ind, ia, ks, ky, la, me, md, ma, mi, mn, ms, mo, mt, ne, nv, nh, nj, nm, ny, nc, nd, oh, ok, ore, pa, ri, sc, sd, tn, tx, ut, vt, va, wa, wv, wi, wy]
                #if the state is found, analyze if pro or anti
                #then save to one of 100 variables
                if al.search(data) is not None:
                        if any(item in data for item in proT):
                                alT = alT + 1
                        if any(item in data for item in proH):
                                alH = alH + 1
                        if any(item in data for item in conT):
                                alH = alH + 1
                        if any(item in data for item in conH):
                                alT = alT + 1

                if ak.search(data) is not None:
                        if any(item in data for item in proT):
                                akT = akT + 1
                        if any(item in data for item in proH):
                                akH = akH + 1
                        if any(item in data for item in conT):
                                akH = akH + 1
                        if any(item in data for item in conH):
                                akT = akT + 1

                if az.search(data) is not None:
                        if any(item in data for item in proT):
                                azT = azT + 1
                        if any(item in data for item in proH):
                                azH = azH + 1
                        if any(item in data for item in conT):
                                azH = azH + 1
                        if any(item in data for item in conH):
                                azT = azT + 1
                    
                if ar.search(data) is not None:
                        if any(item in data for item in proT):
                                arT = arT + 1
                        if any(item in data for item in proH):
                                arH = arH + 1
                        if any(item in data for item in conT):
                                arH = arH + 1
                        if any(item in data for item in conH):
                                arT = arT + 1
                        
                if ca.search(data) is not None:
                        if any(item in data for item in proT):
                                caT = caT + 1
                        if any(item in data for item in proH):
                                caH = caH + 1
                        if any(item in data for item in conT):
                                caH = caH + 1
                        if any(item in data for item in conH):
                                caT = caT + 1

                if co.search(data) is not None:
                        if any(item in data for item in proT):
                                coT = coT + 1
                        if any(item in data for item in proH):
                                coH = coH + 1
                        if any(item in data for item in conT):
                                coH = coH + 1
                        if any(item in data for item in conH):
                                coT = coT + 1

                if ct.search(data) is not None:
                        if any(item in data for item in proT):
                                ctT = ctT + 1
                        if any(item in data for item in proH):
                                ctH = ctH + 1
                        if any(item in data for item in conT):
                                ctH = ctH + 1
                        if any(item in data for item in conH):
                                ctT = ctT + 1
                        
                if de.search(data) is not None:
                        if any(item in data for item in proT):
                                deT = deT + 1
                        if any(item in data for item in proH):
                                deH = deH + 1
                        if any(item in data for item in conT):
                                deH = deH + 1
                        if any(item in data for item in conH):
                                deT = deT + 1

                if fl.search(data) is not None:
                        if any(item in data for item in proT):
                                flT = flT + 1
                        if any(item in data for item in proH):
                                flH = flH + 1
                        if any(item in data for item in conT):
                                flH = flH + 1
                        if any(item in data for item in conH):
                                flT = flT + 1
                    
                if ga.search(data) is not None:
                        if any(item in data for item in proT):
                                gaT = gaT + 1
                        if any(item in data for item in proH):
                                gaH = gaH + 1
                        if any(item in data for item in conT):
                                gaH = gaH + 1
                        if any(item in data for item in conH):
                                gaT = gaT + 1
                        
                if hi.search(data) is not None:
                        if any(item in data for item in proT):
                                hiT = hiT + 1
                        if any(item in data for item in proH):
                                hiH = hiH + 1
                        if any(item in data for item in conT):
                                hiH = hiH + 1
                        if any(item in data for item in conH):
                                hiT = hiT + 1
                        
                if ida.search(data) is not None:
                        if any(item in data for item in proT):
                                idT = idT + 1
                        if any(item in data for item in proH):
                                idH = idH + 1
                        if any(item in data for item in conT):
                                idH = idH + 1
                        if any(item in data for item in conH):
                                idT = idT + 1
                        
                if il.search(data) is not None:
                        if any(item in data for item in proT):
                                ilT = ilT + 1
                        if any(item in data for item in proH):
                                ilH = ilH + 1
                        if any(item in data for item in conT):
                                ilH = ilH + 1
                        if any(item in data for item in conH):
                                ilT = ilT + 1
                    
                if ind.search(data) is not None:
                        if any(item in data for item in proT):
                                inT = inT + 1
                        if any(item in data for item in proH):
                                inH = inH + 1
                        if any(item in data for item in conT):
                                inH = inH + 1
                        if any(item in data for item in conH):
                                inT = inT + 1
                        
                if ia.search(data) is not None:
                        if any(item in data for item in proT):
                                iaT = iaT + 1
                        if any(item in data for item in proH):
                                iaH = iaH + 1
                        if any(item in data for item in conT):
                                iaH = iaH + 1
                        if any(item in data for item in conH):
                                iaT = iaT + 1
                        
                if ks.search(data) is not None:
                        if any(item in data for item in proT):
                                ksT = ksT + 1
                        if any(item in data for item in proH):
                                ksH = ksH + 1
                        if any(item in data for item in conT):
                                ksH = ksH + 1
                        if any(item in data for item in conH):
                                ksT = ksT + 1
                        
                if ky.search(data) is not None:
                        if any(item in data for item in proT):
                                kyT = kyT + 1
                        if any(item in data for item in proH):
                                kyH = kyH + 1
                        if any(item in data for item in conT):
                                kyH = kyH + 1
                        if any(item in data for item in conH):
                                kyT = kyT + 1
                        
                if la.search(data) is not None:
                        if any(item in data for item in proT):
                                laT = laT + 1
                        if any(item in data for item in proH):
                                laH = laH + 1
                        if any(item in data for item in conT):
                                laH = laH + 1
                        if any(item in data for item in conH):
                                laT = laT + 1
                        
                if me.search(data) is not None:
                        if any(item in data for item in proT):
                                meT = meT + 1
                        if any(item in data for item in proH):
                                meH = meH + 1
                        if any(item in data for item in conT):
                                meH = meH + 1
                        if any(item in data for item in conH):
                                meT = meT + 1
                        
                if md.search(data) is not None:
                        if any(item in data for item in proT):
                                mdT = mdT + 1
                        if any(item in data for item in proH):
                                mdH = mdH + 1
                        if any(item in data for item in conT):
                                mdH = mdH + 1
                        if any(item in data for item in conH):
                                mdT = mdT + 1
                        
                if ma.search(data) is not None:
                        if any(item in data for item in proT):
                                maT = maT + 1
                        if any(item in data for item in proH):
                                maH = maH + 1
                        if any(item in data for item in conT):
                                maH = maH + 1
                        if any(item in data for item in conH):
                                maT = maT + 1
                        
                if mi.search(data) is not None:
                        if any(item in data for item in proT):
                                miT = miT + 1
                        if any(item in data for item in proH):
                                miH = miH + 1
                        if any(item in data for item in conT):
                                miH = miH + 1
                        if any(item in data for item in conH):
                                miT = miT + 1
                        
                if mn.search(data) is not None:
                        if any(item in data for item in proT):
                                mnT = mnT + 1
                        if any(item in data for item in proH):
                                mnH = mnH + 1
                        if any(item in data for item in conT):
                                mnH = mnH + 1
                        if any(item in data for item in conH):
                                mnT = mnT + 1
                        
                if ms.search(data) is not None:
                        if any(item in data for item in proT):
                                msT = msT + 1
                        if any(item in data for item in proH):
                                msH = msH + 1
                        if any(item in data for item in conT):
                                msH = msH + 1
                        if any(item in data for item in conH):
                                msT = msT + 1
                        
                if mo.search(data) is not None:
                        if any(item in data for item in proT):
                                moT = moT + 1
                        if any(item in data for item in proH):
                                moH = moH + 1
                        if any(item in data for item in conT):
                                moH = moH + 1
                        if any(item in data for item in conH):
                                moT = moT + 1
                        
                if mt.search(data) is not None:
                        if any(item in data for item in proT):
                                mtT = mtT + 1
                        if any(item in data for item in proH):
                                mtH = mtH + 1
                        if any(item in data for item in conT):
                                mtH = mtH + 1
                        if any(item in data for item in conH):
                                mtT = mtT + 1
                        
                if ne.search(data) is not None:
                        if any(item in data for item in proT):
                                neT = neT + 1
                        if any(item in data for item in proH):
                                neH = neH + 1
                        if any(item in data for item in conT):
                                        neH = neH + 1
                        if any(item in data for item in conH):
                                neT = neT + 1
                        
                if nv.search(data) is not None:
                        if any(item in data for item in proT):
                                nvT = nvT + 1
                        if any(item in data for item in proH):
                                nvH = nvH + 1
                        if any(item in data for item in conT):
                                nvH = nvH + 1
                        if any(item in data for item in conH):
                                nvT = nvT + 1
                        
                if nh.search(data) is not None:
                        if any(item in data for item in proT):
                                nhT = nhT + 1
                        if any(item in data for item in proH):
                                nhH = nhH + 1
                        if any(item in data for item in conT):
                                nhH = nhH + 1
                        if any(item in data for item in conH):
                                nhT = nhT + 1
                        
                if nj.search(data) is not None:
                        if any(item in data for item in proT):
                                njH = njH + 1
                        if any(item in data for item in proH):
                                njT = njT + 1
                        if any(item in data for item in conT):
                                njT = njT + 1
                        if any(item in data for item in conH):
                                njH = njH + 1
                    
                if nm.search(data) is not None:
                        if any(item in data for item in proT):
                                nmT = nmT + 1
                        if any(item in data for item in proH):
                                nmH = nmH + 1
                        if any(item in data for item in conT):
                               nmH = nmH + 1
                        if any(item in data for item in conH):
                                nmT = nmT + 1
                        
                if ny.search(data) is not None:
                        if any(item in data for item in proT):
                                nyT = nyT + 1
                        if any(item in data for item in proH):
                                nyH = nyH + 1
                        if any(item in data for item in conT):
                                nyH = nyH + 1
                        if any(item in data for item in conH):
                                nyT = nyT + 1
                    
                if nc.search(data) is not None:
                        if any(item in data for item in proT):
                                ncT = ncT + 1
                        if any(item in data for item in proH):
                                ncH = ncH + 1
                        if any(item in data for item in conT):
                                ncH = ncH + 1
                        if any(item in data for item in conH):
                                ncT = ncT + 1
                        
                if nd.search(data) is not None:
                        if any(item in data for item in proT):
                                ndT = ndT + 1
                        if any(item in data for item in proH):
                                ndH = ndH + 1
                        if any(item in data for item in conT):
                                ndH = ndH + 1
                        if any(item in data for item in conH):
                                ndT = ndT + 1
                        
                if oh.search(data) is not None:
                        if any(item in data for item in proT):
                                ohT = ohT + 1
                        if any(item in data for item in proH):
                                ohH = ohH + 1
                        if any(item in data for item in conT):
                                ohH = ohH + 1
                        if any(item in data for item in conH):
                                ohT = ohT + 1
                        
                if ok.search(data) is not None:
                        if any(item in data for item in proT):
                                okT = okT + 1
                        if any(item in data for item in proH):
                                okH = okH + 1
                        if any(item in data for item in conT):
                                okH = okH + 1
                        if any(item in data for item in conH):
                                okT = okT + 1
                        
                if ore.search(data) is not None:
                        if any(item in data for item in proT):
                                orT = orT + 1
                        if any(item in data for item in proH):
                                orH = orH + 1
                        if any(item in data for item in conT):
                                orH = orH + 1
                        if any(item in data for item in conH):
                                orT = orT + 1
                        
                if pa.search(data) is not None:
                        if any(item in data for item in proT):
                                paT = paT + 1
                        if any(item in data for item in proH):
                                paH = paH + 1
                        if any(item in data for item in conT):
                                paH = paH + 1
                        if any(item in data for item in conH):
                                paT = paT + 1
                        
                if ri.search(data) is not None:
                        if any(item in data for item in proT):
                                riT = riT + 1
                        if any(item in data for item in proH):
                                riH = riH + 1
                        if any(item in data for item in conT):
                                riH = riH + 1
                        if any(item in data for item in conH):
                                riT = riT + 1
                    
                if sc.search(data) is not None:
                        if any(item in data for item in proT):
                                scT = scT + 1
                        if any(item in data for item in proH):
                                scH = scH + 1
                        if any(item in data for item in conT):
                                scH = scH + 1
                        if any(item in data for item in conH):
                                scT = scT + 1
                        
                if sd.search(data) is not None:
                        if any(item in data for item in proT):
                                sdT = sdT + 1
                        if any(item in data for item in proH):
                                sdH = sdH + 1
                        if any(item in data for item in conT):
                                sdH = sdH + 1
                        if any(item in data for item in conH):
                                sdT = sdT + 1
                        
                if tn.search(data) is not None:
                        if any(item in data for item in proT):
                                tnT = tnT + 1
                        if any(item in data for item in proH):
                                tnH = tnH + 1
                        if any(item in data for item in conT):
                                tnH = tnH + 1
                        if any(item in data for item in conH):
                                tnT = tnT + 1
                        
                if tx.search(data) is not None:
                        if any(item in data for item in proT):
                                txT = txT + 1
                        if any(item in data for item in proH):
                                txH = txH + 1
                        if any(item in data for item in conT):
                                txH = txH + 1
                        if any(item in data for item in conH):
                                txT = txT + 1
                        
                if ut.search(data) is not None:
                        if any(item in data for item in proT):
                                utT = utT + 1
                        if any(item in data for item in proH):
                                utH = utH + 1
                        if any(item in data for item in conT):
                                utH = utH + 1
                        if any(item in data for item in conH):
                                utT = utT + 1
                        
                if vt.search(data) is not None:
                        if any(item in data for item in proT):
                                vtT = vtT + 1
                        if any(item in data for item in proH):
                                vtH = vtH + 1
                        if any(item in data for item in conT):
                                vtH = vtH + 1
                        if any(item in data for item in conH):
                                vtT = vtT + 1
                    
                if va.search(data) is not None:
                        if any(item in data for item in proT):
                                vaT = vaT + 1
                        if any(item in data for item in proH):
                                vaH = vaH + 1
                        if any(item in data for item in conT):
                                vaH = vaH + 1
                        if any(item in data for item in conH):
                                vaT = vaT + 1
                        
                if wa.search(data) is not None:
                        if any(item in data for item in proT):
                                waT = waT + 1
                        if any(item in data for item in proH):
                                waH = waH + 1
                        if any(item in data for item in conT):
                                waH = waH + 1
                        if any(item in data for item in conH):
                                waT = waT + 1
                        
                if wv.search(data) is not None:
                        if any(item in data for item in proT):
                                wvT = wvT + 1
                        if any(item in data for item in proH):
                                wvH = wvH + 1
                        if any(item in data for item in conT):
                                wvH = wvH + 1
                        if any(item in data for item in conH):
                                wvT = wvT + 1
                        
                if wi.search(data) is not None:
                        if any(item in data for item in proT):
                                wiT = wiT + 1
                        if any(item in data for item in proH):
                                wiH = wiH + 1
                        if any(item in data for item in conT):
                                wiH = wiH + 1
                        if any(item in data for item in conH):
                                wiT = wiT + 1
                        
                if wy.search(data) is not None:
                        if any(item in data for item in proT):
                                wyT = wyT + 1
                        if any(item in data for item in proH):
                                wyH = wyH + 1
                        if any(item in data for item in conT):
                                wyH = wyH + 1
                        if any(item in data for item in conH):
                                wyT = wyT + 1

               

                savefile.write(data)
                savefile.write('\n')
                savefile.close()

                #varfile.write("%s %s\n" % (int("txH", txH), int("txT", txT)))
                varfile.write(str(alT)+"\n")
                varfile.write(str(alH)+"\n")
                varfile.write(str(akT)+"\n")
                varfile.write(str(akH)+"\n")
                varfile.write(str(azT)+"\n")
                varfile.write(str(azH)+"\n")
                varfile.write(str(arT)+"\n")
                varfile.write(str(arH)+"\n")
                varfile.write(str(caT)+"\n")
                varfile.write(str(caH)+"\n")
                varfile.write(str(coT)+"\n")
                varfile.write(str(coH)+"\n")
                varfile.write(str(ctT)+"\n")
                varfile.write(str(ctH)+"\n")
                varfile.write(str(dcT)+"\n")
                varfile.write(str(dcH)+"\n")
                varfile.write(str(deT)+"\n")
                varfile.write(str(deH)+"\n")
                varfile.write(str(flT)+"\n")
                varfile.write(str(flH)+"\n")
                varfile.write(str(gaT)+"\n")
                varfile.write(str(gaH)+"\n")
                varfile.write(str(hiT)+"\n")
                varfile.write(str(hiH)+"\n")
                varfile.write(str(idT)+"\n")
                varfile.write(str(idH)+"\n")
                varfile.write(str(ilT)+"\n")
                varfile.write(str(ilH)+"\n")
                varfile.write(str(inT)+"\n")
                varfile.write(str(inH)+"\n")
                varfile.write(str(iaT)+"\n")
                varfile.write(str(iaH)+"\n")
                varfile.write(str(ksT)+"\n")
                varfile.write(str(ksH)+"\n")
                varfile.write(str(kyT)+"\n")
                varfile.write(str(kyH)+"\n")
                varfile.write(str(laT)+"\n")
                varfile.write(str(laH)+"\n")
                varfile.write(str(meT)+"\n")
                varfile.write(str(meH)+"\n")
                varfile.write(str(mdT)+"\n")
                varfile.write(str(mdH)+"\n")
                varfile.write(str(maT)+"\n")
                varfile.write(str(maH)+"\n")
                varfile.write(str(miT)+"\n")
                varfile.write(str(miH)+"\n")
                varfile.write(str(mnT)+"\n")
                varfile.write(str(mnH)+"\n")
                varfile.write(str(msT)+"\n")
                varfile.write(str(msH)+"\n")
                varfile.write(str(moT)+"\n")
                varfile.write(str(moH)+"\n")
                varfile.write(str(mtT)+"\n")
                varfile.write(str(mtH)+"\n")
                varfile.write(str(neT)+"\n")
                varfile.write(str(neH)+"\n")
                varfile.write(str(nvT)+"\n")
                varfile.write(str(nvH)+"\n")
                varfile.write(str(nhT)+"\n")
                varfile.write(str(nhH)+"\n")
                varfile.write(str(njT)+"\n")
                varfile.write(str(njH)+"\n")
                varfile.write(str(nmT)+"\n")
                varfile.write(str(nmH)+"\n")
                varfile.write(str(nyT)+"\n")
                varfile.write(str(nyH)+"\n")
                varfile.write(str(ncT)+"\n")
                varfile.write(str(ncH)+"\n")
                varfile.write(str(ndT)+"\n")
                varfile.write(str(ndH)+"\n")
                varfile.write(str(ohT)+"\n")
                varfile.write(str(ohH)+"\n")
                varfile.write(str(okT)+"\n")
                varfile.write(str(okH)+"\n")
                varfile.write(str(orT)+"\n")
                varfile.write(str(orH)+"\n")
                varfile.write(str(paT)+"\n")
                varfile.write(str(paH)+"\n")
                varfile.write(str(riT)+"\n")
                varfile.write(str(riH)+"\n")
                varfile.write(str(scT)+"\n")
                varfile.write(str(scH)+"\n")
                varfile.write(str(sdT)+"\n")
                varfile.write(str(sdH)+"\n")
                varfile.write(str(tnT)+"\n")
                varfile.write(str(tnH)+"\n")
                varfile.write(str(txT)+"\n")
                varfile.write(str(txH)+"\n")
                varfile.write(str(utT)+"\n")
                varfile.write(str(utH)+"\n")
                varfile.write(str(vtT)+"\n")
                varfile.write(str(vtH)+"\n")
                varfile.write(str(vaT)+"\n")
                varfile.write(str(vaH)+"\n")
                varfile.write(str(waT)+"\n")
                varfile.write(str(waH)+"\n")
                varfile.write(str(wvT)+"\n")
                varfile.write(str(wvH)+"\n")
                varfile.write(str(wiT)+"\n")
                varfile.write(str(wiH)+"\n")
                varfile.write(str(wyT)+"\n")
                varfile.write(str(wyH)+"\n")

                varfile.close()

                totH = (alH + akH + azH + arH + caH + coH + ctH + deH + flH + gaH + hiH + idH + ilH + inH + iaH + ksH + kyH + laH + meH + mdH + maH + miH + mnH + msH + moH + mtH + neH + nvH + nhH + njH + nmH + nyH + ncH + ndH + ohH + okH + orH + paH + riH + scH + sdH + tnH + txH + utH + vtH + vaH + waH + wvH + wiH + wyH)
                totT = (alT + akT + azT + arT + caT + coT + ctT + deT + flT + gaT + hiT + idT + ilT + inT + iaT + ksT + kyT + laT + meT + mdT + maT + miT + mnT + msT + moT + mtT + neT + nvT + nhT + njT + nmT + nyT + ncT + ndT + ohT + okT + orT + paT + riT + scT + sdT + tnT + txT + utT + vtT + vaT + waT + wvT + wiT + wyT)



                return True

        """y = [3, 10, 7, 5, 3, 4.5, 6, 8.1]
        N = len(y)
        x = range(N)
        width = 1/1.5
        plt.bar(x, y, width, color="blue")


        fig = plt.gcf()
        plot_url = py.plot_mpl(fig, filename='mpl-basic-bar')"""

        varfile=open("C:\\Python27\\myPrograms\\varfile.txt","r")
        statevals=[]
        for line in varfile:
            statevals.append(int(line))

        y = stateVals
        N = len(y)
        x = range(N)
        width = 0.5
        plt.bar(x,y, widths, color="red")
        fig=plt.gcf()
        plot_url = py.plot_mpl(fig, filename='mpl-basic-bar')
        #print varfile.read()
        """for line in varfile:
                print line"""
        """with varfile as f:
                lineArr=f.read().split('\n')
                print lineArr"""
        """stateVals = []
        for i in varfile:
            stateVals[i] = line"""
        
        
        return False
       
        

    def on_error(self, status):
        print 'Error on status:', status


if __name__ == '__main__':

    #This handles Twitter authetification and the connection to Twitter Streaming API
    l = StdOutListener(time_limit=40)
    auth = OAuthHandler(consumer_key, consumer_secret)
    auth.set_access_token(access_token, access_token_secret)
    stream = Stream(auth, l)

    #This line filter Twitter Streams to capture data by the keywords: 
    stream.filter(track=['Trump','election','president','Clinton'])
    
